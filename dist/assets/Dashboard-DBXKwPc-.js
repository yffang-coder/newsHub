import{g as w}from"./admin-Bu59Y2qZ.js";import{d as C,o as k,c as n,a as t,F as v,j as f,b as o,w as a,r as m,ab as E,ac as A,W as D,n as F,m as S,l as s,f as b,t as l,ad as T,a8 as V,ae as B,af as N,e as g,a2 as j,i as z,E as L}from"./index-XMcsf4iL.js";const U={class:"space-y-6"},I={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},M={class:"flex items-center justify-between"},W={class:"text-sm text-muted-foreground mb-2"},$={class:"text-2xl font-bold text-primary"},q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},G={class:"space-y-4"},H={class:"flex items-center gap-2 mb-1"},J={class:"font-bold text-sm text-primary"},K={class:"text-xs text-muted-foreground"},O={class:"text-sm text-muted-foreground line-clamp-2"},P={key:0,class:"text-center text-muted-foreground py-4"},Y=C({__name:"Dashboard",setup(Q){const d=m([{title:"总访问量",value:"0",icon:A,color:"#409EFF",key:"totalVisits"},{title:"文章总数",value:"0",icon:D,color:"#67C23A",key:"totalArticles"},{title:"注册用户",value:"0",icon:F,color:"#E6A23C",key:"totalUsers"},{title:"今日评论",value:"0",icon:S,color:"#F56C6C",key:"todayComments"}]),h=m([]),i=m([]);return k(async()=>{try{const r=await w();d.value=d.value.map(_=>{var c;return{..._,value:((c=r[_.key])==null?void 0:c.toString())||"0"}}),h.value=r.recentArticles||[],i.value=r.recentComments||[]}catch(r){console.error("Failed to fetch stats",r)}}),(r,_)=>{const c=L,u=E,p=N,y=B,x=j;return s(),n("div",U,[t("div",I,[(s(!0),n(v,null,f(d.value,e=>(s(),b(u,{key:e.title,shadow:"hover",class:"!border-none"},{default:a(()=>[t("div",M,[t("div",null,[t("div",W,l(e.title),1),t("div",$,l(e.value),1)]),t("div",{class:"w-12 h-12 rounded-lg flex items-center justify-center bg-opacity-10",style:T({backgroundColor:`${e.color}1a`,color:e.color})},[o(c,{size:24},{default:a(()=>[(s(),b(V(e.icon)))]),_:2},1024)],4)])]),_:2},1024))),128))]),t("div",q,[o(u,{header:"最新文章",shadow:"hover",class:"!border-none"},{default:a(()=>[o(y,{data:h.value,style:{width:"100%"}},{default:a(()=>[o(p,{prop:"title",label:"标题","show-overflow-tooltip":""}),o(p,{prop:"views",label:"浏览",width:"80"}),o(p,{prop:"publishTime",label:"日期",width:"120"},{default:a(({row:e})=>[g(l(new Date(e.publishTime).toLocaleDateString()),1)]),_:1})]),_:1},8,["data"])]),_:1}),o(u,{header:"最新评论",shadow:"hover",class:"!border-none"},{default:a(()=>[t("div",G,[(s(!0),n(v,null,f(i.value,e=>(s(),n("div",{key:e.id,class:"flex gap-3 pb-4 border-b border-border last:border-0 last:pb-0"},[o(x,{size:32,class:"flex-shrink-0"},{default:a(()=>[g(l((e.username||"U")[0].toUpperCase()),1)]),_:2},1024),t("div",null,[t("div",H,[t("span",J,l(e.username||"未知用户"),1),t("span",K,l(new Date(e.createdAt).toLocaleString()),1)]),t("p",O,l(e.content),1)])]))),128)),i.value.length===0?(s(),n("div",P," 暂无评论 ")):z("",!0)])]),_:1})])])}}});export{Y as default};
