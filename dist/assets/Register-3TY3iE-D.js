import{d as v,c as b,a as l,b as s,w as a,K as y,L as k,l as h,M as E,g as R,u,n as U,R as C,N as f,O as N,e as n,h as P,r as z,P as B,k as i,Q as L,J as M}from"./index-XMcsf4iL.js";import{r as F}from"./auth-dnEQjOhZ.js";const I={class:"min-h-[calc(100vh-64px-300px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-muted-background"},S={class:"max-w-md w-full space-y-8 bg-background p-8 rounded-xl border border-border shadow-sm"},j={class:"space-y-4"},H={class:"flex items-center"},J={class:"text-center text-sm text-muted-foreground"},T=v({__name:"Register",setup(K){const x=M(),m=z(!1),o=B({username:"",email:"",password:"",confirmPassword:"",agree:!1}),c=async()=>{var p,e;if(!o.agree){i.warning("请先同意服务条款");return}if(o.password!==o.confirmPassword){i.error("两次输入的密码不一致");return}m.value=!0;try{await F({username:o.username,email:o.email,password:o.password,role:"USER"}),i.success("注册成功，请登录"),x.push("/login")}catch(r){i.error(((e=(p=r.response)==null?void 0:p.data)==null?void 0:e.message)||"注册失败")}finally{m.value=!1}};return(p,e)=>{const r=R,d=E,g=N,_=P,w=L("RouterLink"),V=k;return h(),b("div",I,[l("div",S,[e[9]||(e[9]=l("div",{class:"text-center"},[l("h2",{class:"text-3xl font-extrabold text-primary"},"创建账号"),l("p",{class:"mt-2 text-sm text-muted-foreground"}," 加入 NewsHub，开启您的阅读之旅 ")],-1)),s(V,{model:o,class:"mt-8 space-y-6",onSubmit:y(c,["prevent"])},{default:a(()=>[l("div",j,[s(d,null,{default:a(()=>[s(r,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),placeholder:"用户名","prefix-icon":u(U),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:a(()=>[s(r,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=t=>o.email=t),placeholder:"邮箱地址","prefix-icon":u(C),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:a(()=>[s(r,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t),type:"password",placeholder:"密码","prefix-icon":u(f),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:a(()=>[s(r,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=t=>o.confirmPassword=t),type:"password",placeholder:"确认密码","prefix-icon":u(f),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1})]),l("div",H,[s(g,{modelValue:o.agree,"onUpdate:modelValue":e[4]||(e[4]=t=>o.agree=t)},{default:a(()=>[...e[5]||(e[5]=[n(" 我已阅读并同意 ",-1),l("a",{href:"#",class:"text-accent hover:underline"},"服务条款",-1),n(" 和 ",-1),l("a",{href:"#",class:"text-accent hover:underline"},"隐私政策",-1)])]),_:1},8,["modelValue"])]),l("div",null,[s(_,{type:"primary",class:"w-full !h-11 !text-lg",loading:m.value,onClick:c},{default:a(()=>[...e[6]||(e[6]=[n(" 注 册 ",-1)])]),_:1},8,["loading"])]),l("div",J,[e[8]||(e[8]=n(" 已有账号? ",-1)),s(w,{to:"/login",class:"font-medium text-accent hover:text-accent/80"},{default:a(()=>[...e[7]||(e[7]=[n(" 立即登录 ",-1)])]),_:1})])]),_:1},8,["model"])])])}}});export{T as default};
