import{d as I,o as V,C as A,f as x,w as l,k as g,ab as P,r as o,l as E,a as v,b as a,u,ag as U,ah as j,e as n,ai as L,aj as M,ak as N,ae as H,z as F,t as y,h as O,al as Q,am as R,an as $,g as q,ao as G,af as J,ap as K}from"./index-XMcsf4iL.js";import{a as W,d as X}from"./admin-Bu59Y2qZ.js";const Y={class:"flex flex-col sm:flex-row justify-between gap-4 mb-6"},Z={class:"flex gap-2"},ee={class:"flex justify-end mt-6"},oe=I({__name:"Articles",setup(ae){const d=o(""),c=o(1),r=o(10),b=o(0),p=o(!1),h=o([]),_=async()=>{p.value=!0;try{const s=await W(c.value,r.value,d.value.trim()||void 0);h.value=s.items||[],b.value=s.total||0}catch{g.error("获取文章列表失败")}finally{p.value=!1}},z=s=>{$.confirm("确定要删除这篇文章吗？此操作无法撤销。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await X(s.id),g.success("删除成功"),_()}catch{g.error("删除失败")}}).catch(()=>{})};return V(_),A([c,r],_),(s,t)=>{const B=q,f=j,T=G,m=O,i=J,w=F,k=H,D=K,C=P,S=N;return E(),x(C,{shadow:"never",class:"!border-none"},{default:l(()=>[v("div",Y,[v("div",Z,[a(B,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),placeholder:"搜索文章标题...",class:"w-64","prefix-icon":u(U)},null,8,["modelValue","prefix-icon"]),a(T,{placeholder:"分类",class:"w-32"},{default:l(()=>[a(f,{label:"全部",value:""}),a(f,{label:"科技",value:"tech"}),a(f,{label:"环境",value:"env"})]),_:1})]),a(m,{type:"primary",icon:u(L)},{default:l(()=>[...t[3]||(t[3]=[n("写文章",-1)])]),_:1},8,["icon"])]),M((E(),x(k,{data:h.value,style:{width:"100%"}},{default:l(()=>[a(i,{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}),a(i,{prop:"categoryId",label:"分类",width:"120"},{default:l(({row:e})=>[a(w,{size:"small",effect:"plain"},{default:l(()=>[n("类别ID "+y(e.categoryId),1)]),_:2},1024)]),_:1}),a(i,{prop:"status",label:"状态",width:"100"},{default:l(({row:e})=>[a(w,{type:e.status==="PUBLISHED"?"success":"info",size:"small"},{default:l(()=>[n(y(e.status==="PUBLISHED"?"已发布":e.status==="DRAFT"?"草稿":e.status),1)]),_:2},1032,["type"])]),_:1}),a(i,{prop:"publishTime",label:"发布日期",width:"180"},{default:l(({row:e})=>[n(y(new Date(e.publishTime).toLocaleString()),1)]),_:1}),a(i,{label:"操作",width:"150",fixed:"right"},{default:l(({row:e})=>[a(m,{link:"",type:"primary",icon:u(Q),size:"small"},{default:l(()=>[...t[4]||(t[4]=[n("编辑",-1)])]),_:1},8,["icon"]),a(m,{link:"",type:"danger",icon:u(R),size:"small",onClick:te=>z(e)},{default:l(()=>[...t[5]||(t[5]=[n("删除",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[S,p.value]]),v("div",ee,[a(D,{"current-page":c.value,"onUpdate:currentPage":t[1]||(t[1]=e=>c.value=e),"page-size":r.value,"onUpdate:pageSize":t[2]||(t[2]=e=>r.value=e),"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:b.value},null,8,["current-page","page-size","total"])])]),_:1})}}});export{oe as default};
